var saveAs=saveAs||"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(e){"use strict";if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var t=e.document,n=function(){return e.URL||e.webkitURL||e},o=t.createElementNS("http://www.w3.org/1999/xhtml","a"),r="download"in o,i=e.webkitRequestFileSystem,a=e.requestFileSystem||i||e.mozRequestFileSystem,c=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},f=0,u=function(t){var o=function(){"string"==typeof t?n().revokeObjectURL(t):t.remove()};e.chrome?o():setTimeout(o,500)},s=function(e,t,n){for(var o=(t=[].concat(t)).length;o--;){var r=e["on"+t[o]];if("function"==typeof r)try{r.call(e,n||e)}catch(e){c(e)}}},d=function(c,d){var l,p,v,w,y,m=this,h=c.type,O=!1,E=function(){s(m,"writestart progress write writeend".split(" "))},R=function(){(!O&&l||(l=n().createObjectURL(c)),p)?p.location.href=l:void 0==e.open(l,"_blank")&&"undefined"!=typeof safari&&(e.location.href=l);m.readyState=m.DONE,E(),u(l)},S=function(e){return function(){if(m.readyState!==m.DONE)return e.apply(this,arguments)}},b={create:!0,exclusive:!1};if(m.readyState=m.INIT,d||(d="download"),r)return l=n().createObjectURL(c),o.href=l,o.download=d,w=o,(y=t.createEvent("MouseEvents")).initMouseEvent("click",!0,!1,e,0,0,0,0,0,!1,!1,!1,!1,0,null),w.dispatchEvent(y),m.readyState=m.DONE,E(),void u(l);e.chrome&&h&&"application/octet-stream"!==h&&(v=c.slice||c.webkitSlice,c=v.call(c,0,c.size,"application/octet-stream"),O=!0),i&&"download"!==d&&(d+=".download"),("application/octet-stream"===h||i)&&(p=e),a?(f+=c.size,a(e.TEMPORARY,f,S(function(e){e.root.getDirectory("saved",b,S(function(e){var t=function(){e.getFile(d,b,S(function(e){e.createWriter(S(function(t){t.onwriteend=function(t){p.location.href=e.toURL(),m.readyState=m.DONE,s(m,"writeend",t),u(e)},t.onerror=function(){var e=t.error;e.code!==e.ABORT_ERR&&R()},"writestart progress write abort".split(" ").forEach(function(e){t["on"+e]=m["on"+e]}),t.write(c),m.abort=function(){t.abort(),m.readyState=m.DONE},m.readyState=m.WRITING}),R)}),R)};e.getFile(d,{create:!1},S(function(e){e.remove(),t()}),S(function(e){e.code===e.NOT_FOUND_ERR?t():R()}))}),R)}),R)):R()},l=d.prototype;return l.abort=function(){this.readyState=this.DONE,s(this,"abort")},l.readyState=l.INIT=0,l.WRITING=1,l.DONE=2,l.error=l.onwritestart=l.onprogress=l.onwrite=l.onabort=l.onerror=l.onwriteend=null,function(e,t){return new d(e,t)}}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof module&&null!==module?module.exports=saveAs:"undefined"!=typeof define&&null!==define&&null!=define.amd&&define([],function(){return saveAs});