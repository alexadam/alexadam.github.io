class BeerSlider{constructor(e,{start:t="50",prefix:i="beer"}={}){this.start=parseInt(t)?Math.min(100,Math.max(0,parseInt(t))):50,this.prefix=i,e&&2===e.children.length&&(this.element=e,this.revealContainer=this.element.children[1],this.revealContainer.children.length<1||(this.revealElement=this.revealContainer.children[0],this.range=this.addElement("input",{type:"range",class:`${this.prefix}-range`,"aria-label":"Percent of revealed content","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":this.start,value:this.start,min:"0",max:"100"}),this.handle=this.addElement("span",{class:`${this.prefix}-handle`}),this.onImagesLoad()))}init(){this.element.classList.add(`${this.prefix}-ready`),this.setImgWidth(),this.move(),this.addListeners()}loadingImg(e){return new Promise((t,i)=>{e||t();const a=new Image;a.onload=(()=>t()),a.onerror=(()=>i()),a.src=e})}loadedBoth(){const e=this.element.children[0].src||this.element.children[0].getAttribute(`data-${this.prefix}-src`),t=this.revealElement.src||this.revealElement.getAttribute(`data-${this.prefix}-src`);return Promise.all([this.loadingImg(e),this.loadingImg(t)])}onImagesLoad(){this.revealElement&&this.loadedBoth().then(()=>{this.init()},()=>{console.error("Some errors occurred and images are not loaded.")})}addElement(e,t){const i=document.createElement(e);return Object.keys(t).forEach(e=>{i.setAttribute(e,t[e])}),this.element.appendChild(i),i}setImgWidth(){this.revealElement.style.width=getComputedStyle(this.element).width}addListeners(){["input","change"].forEach(e=>{this.range.addEventListener(e,()=>{this.move()})}),window.addEventListener("resize",()=>{this.setImgWidth()})}move(){this.revealContainer.style.width=`${this.range.value}%`,this.handle.style.left=`${this.range.value}%`,this.range.setAttribute("aria-valuenow",this.range.value)}}